---
sidebar: sidebar 
permalink: ws_webhook_example_teams.html 
keywords: webhook, notification, Microsoft, Teams, integration 
summary: Créez un webhook de sécurité de la charge de travail pour Microsoft Teams afin de générer des alertes sur la sécurité 
---
= Exemple de webhook de sécurité de charge de travail pour Microsoft Teams
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Les webhooks permettent aux utilisateurs d'envoyer des notifications d'alerte à diverses applications à l'aide d'un canal webhook personnalisé.  Cette page fournit un exemple de configuration de webhooks pour Teams.


NOTE: Cette page fait référence à des instructions de tiers, qui sont susceptibles d'être modifiées.  Reportez-vous à lalink:https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook["Documentation des équipes"] pour les informations les plus récentes.



== Configuration des équipes :

. Dans Teams, sélectionnez le kebab et recherchez Webhook entrant.
+
image:Webhooks_Teams_Create_Webhook.png["Webhook entrant dans Teams"]

. Sélectionnez *Ajouter à une équipe > Sélectionner une équipe > Configurer un connecteur*.
. Copiez l'URL du Webhook.  Vous devrez coller ceci dans la configuration du webhook Workload Security.




== Créer un webhook pour les équipes de sécurité de la charge de travail :

. Accédez à Admin > Notifications et sélectionnez l’onglet _« Webhooks de sécurité de la charge de travail_ ».  Sélectionnez __+ Webhook_ pour créer un nouveau webhook.
. Donnez au webhook un nom significatif.
. Dans la liste déroulante _Type de modèle_, sélectionnez *Équipes*.
+
image:ws_webhook_teams_example.png["Exemple de webhook pour les équipes de sécurité de la charge de travail"]

. Collez l'URL ci-dessus dans le champ _URL_.




=== Étapes pour créer une notification Teams avec un modèle Adaptive Card

. Remplacez le corps du message par le modèle suivant :
+
....
  {
  "type": "message",
  "attachments": [
    {
      "contentType": "application/vnd.microsoft.card.adaptive",
      "content": {
        "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
        "type": "AdaptiveCard",
        "version": "1.2",
        "body": [
          {
            "type": "TextBlock",
            "text": "%%severity%% Alert: %%synopsis%%",
            "wrap": true,
            "weight": "Bolder",
            "size": "Large"
          },
          {
            "type": "TextBlock",
            "text": "%%detected%%",
            "wrap": true,
            "isSubtle": true,
            "spacing": "Small"
          },
          {
            "type": "FactSet",
            "facts": [
              {
                "title": "User",
                "value": "%%userName%%"
              },
              {
                "title": "Attack/Abnormal Behavior",
                "value": "%%type%%"
              },
              {
                "title": "Action taken",
                "value": "%%actionTaken%%"
              },
              {
                "title": "Files encrypted",
                "value": "%%filesEncrypted%%"
              },
              {
                "title": "Encrypted files suffix",
                "value": "%%encryptedFilesSuffix%%"
              },
              {
                "title": "Files deleted",
                "value": "%%filesDeleted%%"
              },
              {
                "title": "Activity Change Rate",
                "value": "%%changePercentage%%"
              },
              {
                "title": "Severity",
                "value": "%%severity%%"
              },
              {
                "title": "Status",
                "value": "%%status%%"
              },
              {
                "title": "Notes",
                "value": "%%note%%"
              }
            ]
          }
        ],
        "actions": [
          {
            "type": "Action.OpenUrl",
            "title": "View Details",
            "url": "https://%%cloudInsightsHostname%%/%%alertDetailsPageUrl%%"
          }
        ]
      }
    }
  ]
}
....
. Si vous utilisez Power Automate Flows, les paramètres de requête dans l'URL sont au format encodé. Vous devez décoder l'URL avant de la saisir.
. Cliquez sur « Test Webhook » pour vous assurer qu'il n'y a pas d'erreurs.
. Enregistrez le webhook.




== Notifications via Webhook

Pour notifier les événements via le webhook, accédez à _Sécurité de la charge de travail > Politiques_.  Sélectionnez _+Politique d’attaque_ ou _+Politique d’avertissement_.

* Saisissez un nom de politique significatif.
* Sélectionnez les types d'attaque requis, les périphériques auxquels la stratégie doit être associée et les actions requises.
* Sous la liste déroulante _Notifications Webhooks_, sélectionnez les webhooks Teams requis. Sauvegarder la politique.


Remarque : les webhooks peuvent également être attachés à des politiques existantes en les modifiant.

image:ws_add_attack_policy.png["Ajouter une boîte de dialogue de politique d'attaque affichant le webhook"]
