---
sidebar: sidebar 
permalink: task_config_telegraf_docker.html 
keywords: telegraf, installation, install, docker 
summary: Configuration du collecteur de données Docker 
---
= Collecteur de données Docker
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insights utilise ce collecteur de données pour collecter des métriques à partir de Docker.



== Installation

. Depuis *Observabilité > Collecteurs*, cliquez sur *+Collecteur de données*.  Choisissez Docker.
+
Si vous n'avez pas configuré d'agent pour la collecte, vous êtes invité àlink:task_config_telegraf_agent.html["installer un agent"] sur votre locataire.

+
Si vous avez déjà configuré un agent, sélectionnez le système d'exploitation ou la plateforme approprié et cliquez sur *Continuer*.

. Suivez les instructions de l’écran de configuration Docker pour configurer le collecteur de données.  Les instructions varient en fonction du type de système d’exploitation ou de plate-forme que vous utilisez pour collecter des données.


image:DockerDCConfigLinux.png["Configuration de Docker"]



== Installation

Le plugin d'entrée Telegraf pour Docker collecte des métriques via un socket UNIX spécifié ou un point de terminaison TCP.



=== Compatibilité

La configuration a été développée sur la version Docker 1.12.6.



=== Installation



=== Accéder à Docker via un socket UNIX

Si l'agent Telegraf s'exécute sur baremetal, ajoutez l'utilisateur Unix telegraf au groupe Unix docker en exécutant ce qui suit :

 sudo usermod -aG docker telegraf
Si l'agent Telegraf s'exécute dans un pod Kubernetes, exposez le socket Docker Unix en mappant le socket dans le pod en tant que volume, puis en montant ce volume sur /var/run/docker.sock.  Par exemple, ajoutez ce qui suit au PodSpec :

[listing]
----
volumes:
...
- name: docker-sock
hostPath:
path: /var/run/docker.sock
type: File
----
Ensuite, ajoutez les éléments suivants au conteneur :

[listing]
----
volumeMounts:
...
- name: docker-sock
mountPath: /var/run/docker.sock
----
Notez que le programme d’installation de Data Infrastructure Insights fourni pour la plateforme Kubernetes prend en charge ce mappage automatiquement.



=== Accéder à Docker via un point de terminaison TCP

Par défaut, Docker utilise le port 2375 pour l’accès non chiffré et le port 2376 pour l’accès chiffré.



== Objets et compteurs

Les objets suivants et leurs compteurs sont collectés :

[cols="<.<,<.<,<.<,<.<"]
|===
| Objet: | Identifiants : | Attributs: | Points de données : 


| Moteur Docker | Espace de noms Docker Engine | Nom du nœud IP du nœud UUID du nœud Système d'exploitation du nœud Cluster Kubernetes Version Docker Unité | Conteneurs de mémoire Conteneurs Conteneurs en pause Conteneurs en cours d'exécution CPU arrêtés Routines Go Images Événements d'écoute utilisés Descripteurs de fichiers Données Données disponibles Données totales utilisées Métadonnées Métadonnées disponibles Métadonnées totales utilisées Taille de bloc du pool 


| Conteneur Docker | Espace de noms Nom du conteneur Moteur Docker | Hachage du conteneur Kubernetes Ports du conteneur Kubernetes Nombre de redémarrages du conteneur Kubernetes Chemin du message de fin du conteneur Kubernetes Politique de message de fin du conteneur Kubernetes Période de grâce de fin du pod Kubernetes Image du conteneur État du conteneur Version du conteneur Nom du nœud Chemin du journal du conteneur Kubernetes Nom du conteneur Kubernetes Type Docker Kubernetes Nom du pod Kubernetes Espace de noms du pod Kubernetes UID du pod Kubernetes ID du sandbox Kubernetes IP du nœud UUID du nœud Version Docker Configuration E/S Kubernetes vue Source de la configuration E/S Kubernetes OpenShift IO SCC Description Kubernetes Nom d'affichage Kubernetes Balises OpenShift Service Kompose Modèle de pod Contrôleur de hachage Révision du hachage Génération du modèle de pod Licence Date de build du schéma Nom du schéma de licence URL du schéma URL du VCS du schéma Fournisseur du schéma Version du schéma Schéma Responsable de la version du schéma Pod client Kubernetes StatefulSet Nom du pod Tenant Architecture de la console Web URL source faisant autorité Date de build Hôte de build RH Distribution des composants RH Portée Installation Résumé de l'exécution de la version Désinstaller Référence VCS Type VCS Fournisseur Version État de santé ID du conteneur | Mémoire active, anonyme, fichier actif, cache, limite hiérarchique, mémoire inactive, anonyme, fichier inactif, limite de mémoire, fichier mappé, mémoire, utilisation maximale, erreur de page, erreur majeure de page, mémoire paginée, mémoire paginée, mémoire sortante, taille de l'ensemble résident, mémoire, taille de l'ensemble résident, énorme mémoire, mémoire anonyme active totale, fichier actif, mémoire cache totale, mémoire anonyme inactive totale, fichier inactif, mémoire, fichier mappé, mémoire, erreur de page, erreur majeure de page, mémoire paginée, mémoire sortante, mémoire, taille de l'ensemble résident, mémoire, taille de l'ensemble résident, énorme mémoire, mémoire non supprimable, utilisation de la mémoire non supprimable, pourcentage d'utilisation de la mémoire, code de sortie, OOM, PID tué, commencé à la série d'échecs. 


| Bloc d'E/S du conteneur Docker | Espace de noms Nom du conteneur Appareil Moteur Docker | Hachage du conteneur Kubernetes Ports du conteneur Kubernetes Nombre de redémarrages du conteneur Kubernetes Chemin du message de fin du conteneur Kubernetes Politique de message de fin du conteneur Kubernetes Période de grâce de fin du pod Kubernetes Image du conteneur État du conteneur Version du conteneur Nom du nœud Chemin du journal du conteneur Kubernetes Nom du conteneur Kubernetes Type Docker Kubernetes Nom du pod Kubernetes Espace de noms du pod Kubernetes UID du pod Kubernetes ID du sandbox Kubernetes IP du nœud UUID du nœud Version Docker Configuration Kubernetes vue Source de la configuration Kubernetes OpenShift SCC Description Kubernetes Nom d'affichage Kubernetes Balises OpenShift Schéma Version du schéma Modèle de pod Contrôleur de hachage Révision Génération du modèle de pod de hachage Service Kompose Date de build du schéma Licence du schéma Nom du schéma Fournisseur de schéma Pod client Kubernetes StatefulSet Nom du pod Tenant Console Web Date de build Licence Fournisseur Architecture URL source faisant autorité Hôte de build RH Distribution des composants RH Portée Installation Responsable Publication Résumé de l'exécution Désinstallation Référence VCS Type VCS Version URL du schéma Schéma URL VCS Version du schéma ID du conteneur | Octets de service d'E/S récursifs asynchrones Octets de service d'E/S récursifs en lecture Octets de service d'E/S récursifs en synchronisation Octets de service d'E/S récursifs Total d'octets de service d'E/S récursifs en écriture Octets de service d'E/S récursifs asynchrones avec service d'E/S récursifs en lecture Octets de service d'E/S récursifs en synchronisation avec service d'E/S récursifs Total d'E/S récursifs en écriture 


| Réseau de conteneurs Docker | Espace de noms Conteneur Nom Réseau Moteur Docker | Image du conteneur État du conteneur Version du conteneur Nom du nœud IP du nœud UUID du nœud Système d'exploitation du nœud Cluster K8s Version Docker ID du conteneur | RX Octets RX supprimés Erreurs RX Paquets RX TX Octets TX supprimés Erreurs TX Paquets TX 


| Processeur du conteneur Docker | Espace de noms Nom du conteneur CPU Moteur Docker | Hachage du conteneur Kubernetes Ports du conteneur Kubernetes Nombre de redémarrages du conteneur Kubernetes Chemin du message de fin du conteneur Kubernetes Politique de message de fin du conteneur Kubernetes Période de grâce de fin du pod Kubernetes Configuration Kubernetes vue Source de la configuration Kubernetes Image conteneur SCC OpenShift État du conteneur Version du conteneur Nom du nœud Chemin du journal du conteneur Kubernetes Nom du conteneur Kubernetes Type Docker Kubernetes Nom du pod Kubernetes Espace de noms du pod Kubernetes UID du pod Kubernetes ID du sandbox Kubernetes IP du nœud UUID du nœud Système d'exploitation du nœud Cluster Kubernetes Version Docker Description Kubernetes Nom d'affichage Kubernetes Balises OpenShift Version du schéma Modèle de pod Contrôleur de hachage Révision Génération du modèle de pod de hachage Service Kompose Date de build du schéma Licence du schéma Nom du schéma Fournisseur de schéma Pod client Kubernetes StatefulSet Nom du pod Tenant Date de build de la console Web Licence Fournisseur Architecture URL source faisant autorité Hôte de build RH Distribution des composants RH Portée Installer Responsable de la publication Résumé de l'exécution Désinstaller Référence VCS Type VCS Version Schéma URL Schéma URL VCS Version ID du conteneur | Périodes de limitation Périodes de limitation Durée de limitation Utilisation en mode noyau Utilisation en mode utilisateur Pourcentage d'utilisation Utilisation du système Total 
|===


== Dépannage

[cols="2*"]
|===
| Problème: | Essayez ceci: 


| Je ne vois pas mes métriques Docker dans Data Infrastructure Insights après avoir suivi les instructions sur la page de configuration. | Vérifiez les journaux de l'agent Telegraf pour voir s'il signale l'erreur suivante : E!  Erreur dans le plugin [inputs.docker] : l'autorisation a été refusée lors de la tentative de connexion au socket du démon Docker. Si c'est le cas, prenez les mesures nécessaires pour fournir à l'agent Telegraf l'accès au socket Docker Unix comme spécifié ci-dessus. 
|===
Des informations complémentaires peuvent être trouvées à partir dulink:concept_requesting_support.html["Support"] page.
