---
sidebar: sidebar 
permalink: task_create_webhook.html 
keywords: webhook, notification, slack, integration 
summary: 'Créer des moniteurs pour alerter sur les seuils de performance ou d"inventaire' 
---
= Notification à l'aide de Webhooks
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Les webhooks permettent aux utilisateurs d'envoyer des notifications d'alerte à diverses applications à l'aide d'un canal webhook personnalisé.

De nombreuses applications commerciales prennent en charge les webhooks comme interface d'entrée standard, par exemple : Slack, PagerDuty, Teams et Discord prennent tous en charge les webhooks.  En prenant en charge un canal webhook générique et personnalisable, Data Infrastructure Insights peut prendre en charge bon nombre de ces canaux de diffusion.  Des informations sur les webhooks peuvent être trouvées sur ces sites Web d'application.  Par exemple, Slack fournitlink:https://api.slack.com/messaging/webhooks["ce guide utile"] .

Vous pouvez créer plusieurs canaux webhook, chaque canal ciblant un objectif différent ; applications distinctes, destinataires différents, etc.

L'instance de canal webhook est composée des éléments suivants :

|===


| Nom | Nom unique 


| URL | URL cible du webhook, y compris le préfixe _http://_ ou _https://_ ainsi que les paramètres d'URL 


| Méthode | GET, POST - La valeur par défaut est POST 


| En-tête personnalisé | Spécifiez ici toutes les lignes d'en-tête personnalisées 


| Corps du message | Mettez le corps de votre message ici 


| Paramètres d'alerte par défaut | Répertorie les paramètres par défaut du webhook 


| Paramètres et secrets personnalisés | Les paramètres et secrets personnalisés vous permettent d'ajouter des paramètres uniques et des éléments sécurisés tels que des mots de passe 
|===


== Créer un Webhook

Pour créer un webhook Data Infrastructure Insights , accédez à *Admin > Notifications* et sélectionnez l'onglet *Webhooks*.

L'image suivante montre un exemple de webhook configuré pour Slack :

image:Webhook_Example_Slack.png["Exemple de webhook"]

Saisissez les informations appropriées pour chacun des champs et cliquez sur « Enregistrer » lorsque vous avez terminé.

Vous pouvez également cliquer sur le bouton « Tester le Webhook » pour tester la connexion.  Notez que cela enverra le « Corps du message » (sans substitutions) à l'URL définie selon la méthode sélectionnée.

Les webhooks Data Infrastructure Insights comprennent un certain nombre de paramètres par défaut.  De plus, vous pouvez créer vos propres paramètres ou secrets personnalisés.

image:Webhook_Default_Parameters.png["Paramètres Webhook par défaut de Data Infrastructure Insights"]



=== Paramètres : que sont-ils et comment les utiliser ?

Les paramètres d’alerte sont des valeurs dynamiques renseignées par alerte.  Par exemple, le paramètre _%%TriggeredOn%%_ sera remplacé par l'objet sur lequel l'alerte a été déclenchée.

Vous pouvez ajouter n’importe quel attribut d’objet (par exemple, le nom de stockage) en tant que paramètre à un webhook.  Par exemple, vous pouvez définir des paramètres pour le nom du volume et le nom du stockage dans une description de webhook comme : « Latence élevée pour le volume : _%%relatedObject.volume.name%%_, Stockage : _%%relatedObject.storage.name%%_ ».

Notez que dans cette section, les substitutions ne sont _pas_ effectuées lorsque vous cliquez sur le bouton « Tester le Webhook » ; le bouton envoie une charge utile qui affiche les _%%_ substitutions mais ne les remplace pas par des données.



=== Paramètres et secrets personnalisés

Dans cette section, vous pouvez ajouter tous les paramètres personnalisés et/ou secrets que vous souhaitez.  Pour des raisons de sécurité, si un secret est défini, seul le créateur du webhook peut modifier ce canal de webhook.  Il est en lecture seule pour les autres.  Vous pouvez utiliser des secrets dans les URL/en-têtes comme _%%<secret_name>%%_.



=== Page de liste des Webhooks

Sur la page de liste des Webhooks, les champs Nom, Créé par, Créé le, Statut, Sécurisé et Dernier signalement sont affichés.



== Choisir une notification Webhook dans un moniteur

Pour choisir la notification webhook dans unlink:task_create_monitor.html["moniteur"] , allez dans *Alertes > Gérer les moniteurs* et sélectionnez le moniteur souhaité ou ajoutez un nouveau moniteur.  Dans la section _Configurer les notifications d'équipe_, choisissez _Webhook_ comme méthode de livraison.  Sélectionnez les niveaux d’alerte (Critique, Avertissement, Résolu), puis choisissez le webhook souhaité.

image:Webhook_Monitor_Notify.png["Notification du moniteur Webhook"]



== Exemples de webhooks :

Webhooks pourlink:task_webhook_example_slack.html["Mou"] Webhooks pourlink:task_webhook_example_pagerduty.html["PagerDuty"] Webhooks pourlink:task_webhook_example_teams.html["Équipes"] Webhooks pourlink:task_webhook_example_discord.html["Discorde"]
