---
sidebar: sidebar 
permalink: task_annotation_import.html 
keywords: annotations, import, api 
summary: Vous pouvez importer des annotations et des applications à l’aide de l’API Data Infrastructure Insights . 
---
= Importation d'annotations
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Data Infrastructure Insights inclut une API permettant d'importer des annotations ou des applications à partir d'un fichier CSV et de les attribuer aux objets que vous spécifiez.


NOTE: L'API Data Infrastructure Insights est disponible dans * Data Infrastructure Insights Premium Edition*.



== Importation

Les liens *Admin > Accès API* contiennentlink:API_Overview.html["documentation"] pour l'API *Assets/Import*.  Cette documentation contient des informations sur le format de fichier .CSV.

image:api_assets_import.png["API d'importation"]



== Format de fichier .CSV

Le format général du fichier CSV est le suivant.  La première ligne du fichier définit les champs d'importation et spécifie l'ordre des champs.  Ceci est suivi de lignes séparées pour chaque annotation ou application.  Vous n’avez pas besoin de définir tous les champs.  Cependant, les lignes d’annotation suivantes doivent suivre le même ordre que la ligne de définition.

 [Object Type] , [Object Name or ID] , Annotation Type [, Annotation Type,  ...] [, Application] [, Tenant] [, Line_Of_Business] [, Business_Unit] [, Project]
Consultez la documentation de l'API pour des exemples de fichiers .CSV.

Vous pouvez importer et attribuer des annotations à partir d'un fichier .CSV depuis l'API Swagger elle-même.  Choisissez simplement le fichier à utiliser et cliquez sur le bouton _Exécuter_ :

image:api_assets_import_assign.png["Importer et attribuer"]



== Comportement d'importation

Lors de l'opération d'importation, les données sont ajoutées, fusionnées ou remplacées, en fonction des objets et des types d'objets importés.  Lors de l’importation, gardez à l’esprit les comportements suivants.

* Ajoute une annotation ou une application si aucune n'existe avec le même nom dans le système cible.
* Fusionne une annotation si le type d'annotation est une liste et qu'une annotation portant le même nom existe dans le système cible.
* Remplace une annotation si le type d'annotation est autre qu'une liste et qu'une annotation portant le même nom existe dans le système cible.
+
Remarque : si une annotation portant le même nom mais un type différent existe dans le système cible, l'importation échoue.  Si les objets dépendent de l’annotation ayant échoué, ces objets peuvent afficher des informations incorrectes ou indésirables.  Vous devez vérifier toutes les dépendances d’annotation une fois l’opération d’importation terminée.

* Si une valeur d’annotation est vide, cette annotation est supprimée de l’objet.  Les annotations héritées ne sont pas affectées.
* Les valeurs d'annotation de type date doivent être transmises sous forme d'heure Unix en millisecondes.
* Lors de l'annotation de volumes ou de volumes internes, le nom de l'objet est une combinaison du nom de stockage et du nom de volume utilisant le séparateur « \-> ».  Par exemple : _<Nom de stockage>\-><Nom du volume>_
* Si un nom d'objet contient une virgule, le nom entier doit être entre guillemets.  Par exemple : _"NetApp1,NetApp2"\->023F_
* Lors de l'ajout d'annotations aux stockages, aux commutateurs et aux ports, la colonne « Application » sera ignorée.
* Le locataire, le secteur d'activité, l'unité commerciale et/ou le projet constituent une entité commerciale.  Comme pour toutes les entités commerciales, n’importe laquelle des valeurs peut être vide.


Les types d’objets suivants peuvent être annotés.

|===


| TYPE D'OBJET | NOM OU CLÉ 


| Hôte | id\-><id> ou <Nom> ou <IP> 


| Machine virtuelle | id\-><id> ou <Nom> 


| Pool de stockage | id\-><id> ou <Nom de stockage>\-><Nom du pool de stockage> 


| Volume interne | id\-><id> ou <Nom de stockage>\-><Nom du volume interne> 


| Volume | id\-><id> ou <Nom de stockage>\-><Nom du volume> 


| Stockage | id\-><id> ou <Nom> ou <IP> 


| Changer | id\-><id> ou <Nom> ou <IP> 


| Port | id\-><id> ou <WWN> 


| Qtree | id\-><id> ou <Nom de stockage>\-><Nom du volume interne>\-><Nom Qtree> 


| Partager | id\-><id> ou <Nom de stockage>\-><Nom du volume interne>\-><Nom de partage>\-><Protocole>[\-><Nom Qtree (facultatif en cas de Qtree par défaut)>] 
|===