---
sidebar: sidebar 
permalink: concept_kubernetes_network_monitoring_and_map.html 
keywords: service map, workloads, 
summary: Présente les dépendances et les flux de charge de travail de Kubernetes et met en évidence les problèmes de réseau et de performances 
---
= Surveillance et cartographie des performances du réseau Kubernetes
:hardbreaks:
:allow-uri-read: 


[role="lead"]
La fonctionnalité Kubernetes Network Performance Monitoring and Map simplifie le dépannage en mappant les dépendances entre les services (également appelés charges de travail) et offre une visibilité en temps réel sur les latences et les anomalies des performances du réseau pour identifier les problèmes de performances avant qu'ils n'affectent les utilisateurs.  Cette capacité aide les organisations à réduire les coûts globaux en analysant et en auditant les flux de trafic Kubernetes.

Principales fonctionnalités : • La carte de charge de travail présente les dépendances et les flux de charge de travail de Kubernetes et met en évidence les problèmes de réseau et de performances.  • Surveillez le trafic réseau entre les pods, les charges de travail et les nœuds Kubernetes ; identifiez la source des problèmes de trafic et de latence.  • Réduisez les coûts globaux en analysant le trafic réseau entrant, sortant, interrégional et interzone.

image:workload-map-animated.gif["Exemple de carte de charge de travail"]



== Prérequis

Avant de pouvoir utiliser la surveillance et la cartographie des performances du réseau Kubernetes, vous devez avoir configuré lelink:task_config_telegraf_agent_k8s.html["Opérateur de surveillance NetApp Kubernetes"] pour activer cette option.  Lors du déploiement de l'opérateur, sélectionnez la case à cocher « Performances et carte du réseau » pour l'activer.  Vous pouvez également activer cette option en accédant à une page de destination Kubernetes et en sélectionnant « Modifier le déploiement ».

image:ServiceMap_NKMO_Deployment_Options.png["sélection de l'option Carte pendant l'arrêt de NKMO"]



== Moniteurs

La carte de charge de travail utiliselink:task_create_monitor.html["moniteurs"] pour obtenir des informations.  Data Infrastructure Insights fournit un certain nombre de moniteurs Kubernetes par défaut (notez que ceux-ci peuvent être _en pause_ par défaut).  Vous pouvez _Reprendre_ (c'est-à-dire activer) les moniteurs que vous souhaitez, ou vous pouvez créer des moniteurs personnalisés pour les objets Kubernetes, que Workload Map utilisera également.

Vous pouvez créer des alertes de métrique Data Infrastructure Insights sur n’importe lequel des types d’objets ci-dessous.  Assurez-vous que les données sont regroupées par type d’objet par défaut.

* charge de travail Kubernetes
* ensemble de démons Kubernetes
* déploiement de Kubernetes
* kubernetes.cronjob
* kubernetes.job
* kubernetes.replicaset
* kubernetes.statefulset
* kubernetes.pod
* kubernetes.network_traffic_l4




== La carte

La carte montre les services/charges de travail et leurs relations entre eux.  Les flèches indiquent les directions de circulation.  Le survol d'une charge de travail affiche des informations récapitulatives pour cette charge de travail, comme vous pouvez le voir dans cet exemple :

image:ServiceMap_Simple_Example.png["Exemple de carte de charge de travail"]

Les icônes dans les cercles représentent différents types de services.  Notez que les icônes ne sont visibles que si les objets sous-jacents ont<<workload-labels,étiquettes>> .

image:ServiceMap_Icons.png["Icônes de service expliquées"]

La taille de chaque cercle indique la taille du nœud.  Notez que ces tailles sont relatives, le niveau de zoom de votre navigateur ou la taille de votre écran peuvent affecter les tailles réelles des cercles.  De la même manière, le style de ligne de trafic vous donne un aperçu rapide de la taille de la connexion ; les lignes continues en gras correspondent à un trafic élevé, tandis que les lignes pointillées claires correspondent à un trafic plus faible.

Les nombres à l'intérieur des cercles indiquent le nombre de connexions externes actuellement traitées par le service.

image:ServiceMap_Node_and_Connection_Legend.png["légende indiquant les tailles relatives du cercle (nœud) et de la connexion"]



== Détails et alertes de charge de travail

Les cercles affichés en couleur indiquent une alerte de niveau d'avertissement ou critique pour la charge de travail.  Passez la souris sur le cercle pour obtenir un résumé du problème ou cliquez sur le cercle pour ouvrir un panneau coulissant avec plus de détails.

image:Workload_Map_Slideout_with_Alert.png["Détails de la charge de travail coulissante avec alertes"]



== Recherche et filtrage

Comme avec d’autres fonctionnalités de Data Infrastructure Insights , vous pouvez facilement définir des filtres pour vous concentrer sur les objets spécifiques ou les attributs de charge de travail souhaités.

image:Workload_Map_Filtering.png["Filtrage de la carte de charge de travail"]

De même, la saisie d’une chaîne dans le champ _Rechercher_ mettra en évidence les charges de travail correspondantes.

image:Workload_Map_Find_Highlighting.png["la saisie dans la zone de recherche met en évidence les charges de travail"]



== Étiquettes de charge de travail

Les étiquettes de charge de travail sont nécessaires si vous souhaitez que la carte identifie les types de charges de travail affichées (c'est-à-dire les icônes en forme de cercle).  Les étiquettes sont dérivées comme suit :

* Nom du service/de l'application exécuté en termes génériques
* Si la source est un pod :
+
** L'étiquette est dérivée de l'étiquette de charge de travail du pod
** Étiquette attendue sur la charge de travail : app.kubernetes.io/component
** Référence du nom de l'étiquette : https://kubernetes.io/docs/concepts/overview/working-with-objects/common-labels/[]
** Étiquettes recommandées :
+
*** l'extrémité avant
*** backend
*** base de données
*** cache
*** file d'attente
*** Kafka




* Si la source est externe au cluster Kubernetes :
+
** Data Infrastructure Insights tentera d'analyser le nom résolu DNS pour extraire le type de service.
+
Par exemple, avec un nom DNS résolu de _s3.eu-north-1.amazonaws.com_, le nom résolu est analysé pour obtenir _s3_ comme type de service.







== Plongez en profondeur

Un clic droit sur une charge de travail vous présente des options supplémentaires à explorer plus en détail.  Par exemple, à partir d’ici, vous pouvez zoomer pour afficher les connexions pour cette charge de travail.

image:Workload_Map_Zoom_Into_Connections.png["Carte de charge de travail Cliquez avec le bouton droit de la souris sur Zoom pour afficher les connexions de la charge de travail"]

Vous pouvez également ouvrir le panneau coulissant des détails pour afficher directement l'onglet _Résumé_, _Réseau_ ou _Pod et stockage_.

image:Workload_Map_Detail_Network_Slideout.png["Exemple d'onglet réseau coulissant détaillé"]

Enfin, la sélection de _Accéder à la page des ressources_ ouvrira la page de destination détaillée des ressources pour la charge de travail.

image:Workload_Map_Asset_Page.png["Page d'actifs de charge de travail"]
