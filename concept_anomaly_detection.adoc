---
sidebar: sidebar 
permalink: concept_anomaly_detection.html 
keywords: Anomalies, anomaly, patterns, monitor, alert 
summary: Surveiller les métriques pour détecter les anomalies 
---
= Moniteurs de détection d'anomalies
:hardbreaks:
:allow-uri-read: 
:nofooter: 


[role="lead"]
La détection des anomalies fournit un aperçu des changements inattendus dans les modèles de données de votre locataire.  Une anomalie se produit lorsque le modèle de comportement d'un objet change, par exemple, si un objet subit un certain niveau de latence à un certain moment le mercredi, mais que la latence dépasse ce niveau à ce moment-là le mercredi suivant, ce pic serait considéré comme une anomalie.  Data Infrastructure Insights permet la création de moniteurs pour alerter lorsque des anomalies telles que celle-ci se produisent.

La détection d’anomalies convient aux mesures d’objets qui présentent un modèle récurrent et prévisible.  Lorsque ces mesures d'objet dépassent ou chutent en dessous de leurs niveaux attendus, Data Infrastructure Insights peut générer une alerte pour inciter à une enquête.

image:anomaly_detection_expert_view.png["graphique montrant l'anomalie détectée"]



== Qu'est-ce que la détection d'anomalies ?

Une anomalie se produit lorsque la valeur moyenne d'une mesure est éloignée d'un certain nombre d'écarts types de la moyenne pondérée de cette mesure pour les semaines précédentes, les semaines récentes ayant plus de poids que les semaines précédentes.  Data Infrastructure Insights offre la possibilité de surveiller les données et d'alerter lorsque des anomalies sont détectées.  Vous avez le choix de définir les niveaux de « sensibilité » de détection.  Par exemple, une sensibilité plus élevée serait obtenue lorsque la valeur moyenne présente moins d'écarts types par rapport à la moyenne, ce qui entraînerait la génération d'un plus grand nombre d'alertes.  À l’inverse, une sensibilité plus faible = plus d’écarts types par rapport à la moyenne = moins d’alertes.



=== La surveillance de la détection des anomalies diffère de la surveillance des seuils.

* *La surveillance basée sur des seuils* fonctionne lorsque vous avez des seuils prédéfinis pour des mesures spécifiques.  En d’autres termes, lorsque vous avez une compréhension claire de ce qui est attendu (c’est-à-dire dans une fourchette normale).


image:MetricMonitor_blurb.png["Les moniteurs métriques sont utiles lorsque vous connaissez la plage de fonctionnement"]

* *La surveillance de détection d'anomalies* utilise des algorithmes d'apprentissage automatique pour identifier les valeurs aberrantes qui s'écartent de la norme, lorsque la définition de « normal » n'est pas claire.


image:ADMonitor_blurb.png["Les moniteurs de détection d'anomalies sont utiles lorsque vous souhaitez connaître les pics ou les chutes"]



== Quand aurais-je besoin de la détection d’anomalies ?

La surveillance de la détection des anomalies peut fournir des alertes utiles dans de nombreuses situations, notamment les suivantes :

* Lorsque la définition de _normal_ n'est pas claire.  Par exemple, les taux d’erreur SAN peuvent être attendus à des niveaux variables selon le port.  Alerter sur une erreur est bruyant et inutile, mais une augmentation soudaine ou significative pourrait indiquer un problème généralisé.
* Là où il y a des changements au fil du temps.  Charges de travail qui présentent une saisonnalité (c'est-à-dire qu'elles sont occupées ou calmes à certains moments).  Cela peut inclure des périodes de silence inattendues qui peuvent indiquer un blocage du lot.
* Travailler avec de grandes quantités de données où la définition et le réglage manuels des seuils ne sont pas pratiques.  Par exemple, un locataire avec un grand nombre d’hôtes et/ou de volumes avec des charges de travail variables.  Chacun peut avoir des SLA différents, il est donc important de comprendre ceux qui dépassent la norme.




== Création d'un moniteur de détection d'anomalies

Pour alerter sur les anomalies, créez un moniteur en accédant à *Observabilité > Alertes > +Moniteur*.  Sélectionnez _Anomaly Detection Monitor_ comme type de moniteur.

image:AnomalyDetectionMonitorChoice.png["Sélection de la détection d'anomalie lors de la création d'un moniteur, largeur = 480"]

Choisissez l’objet et la métrique que vous souhaitez surveiller.  Vous pouvez définir des filtres et des regroupements comme avec d’autres types de moniteurs.

Ensuite, définissez les conditions du moniteur.

* Déclenchez une alerte lorsque la métrique sélectionnée dépasse les limites prévues, chute en dessous de ces limites ou les deux.
* Définissez la sensibilité sur _Moyenne_, _Faible_ (moins d'anomalies sont détectées) ou _Élevée_ (plus d'anomalies sont détectées).
* Déterminez si le niveau d’alerte est _Critique_ ou _Avertissement_.
* Vous pouvez également définir une valeur en dessous de laquelle les anomalies sont _ignorées_.  Cela peut aider à réduire le bruit.  Cette valeur est affichée sous forme de ligne pointillée sur l’exemple de graphique.


image:AnomalyDetectionMonitorConditions.png["Définition des conditions pour le moniteur de détection d'anomalies"]

Enfin, vous pouvez configurer une méthode de livraison pour les alertes (e-mail, webhook ou les deux), donner au moniteur une description facultative ou des actions correctives et ajouter le moniteur à un groupe personnalisé, si vous le souhaitez.

Enregistrez le moniteur avec un nom significatif et vous avez terminé.

Lors de sa création, le moniteur analyse les données de la semaine précédente pour établir une base de référence initiale.  La détection des anomalies devient plus précise à mesure que le temps passe et que l'historique se déroule.


NOTE: Lorsqu'un moniteur est créé, DII examine toutes les données existantes de la semaine précédente pour détecter des pics ou des baisses de données significatifs ; ceux-ci sont considérés comme des anomalies.  Au cours de la première semaine suivant la création du moniteur (la phase « d'apprentissage »), il existe un risque d'augmentation du « bruit » dans les alertes.  Pour atténuer ce bruit, seuls les pics ou les chutes durant plus de 30 minutes sont considérés comme des anomalies et génèrent des alertes.  Au cours de la semaine suivante, à mesure que davantage de données sont analysées, le bruit diminue généralement et un pic ou une baisse significative durant une certaine période sera considéré comme une anomalie.



== Visualisation des anomalies

Sur une page de destination d'alerte, les alertes déclenchées lorsque des anomalies sont détectées afficheront une bande en surbrillance dans le graphique, à partir du moment où la métrique a dépassé les limites prévues jusqu'au moment où elle est revenue à l'intérieur de ces limites.

image:Anomaly_Detection_Chart_Example_Expert_View.png["Graphique montrant le moment où une anomalie s'est produite"]

Lorsque vous consultez un graphique d’anomalie sur une page de destination d’alerte, vous pouvez choisir les options suivantes :

* Tendance hebdomadaire : comparez les valeurs à la même heure, au même jour des semaines précédentes, jusqu'à 5 semaines précédentes.
* Limites d'anomalie complètes : par défaut, le graphique se concentre sur la valeur de la métrique afin que vous puissiez mieux analyser le comportement de la métrique.  Sélectionnez pour afficher les limites complètes de l'anomalie (valeur maximale, etc.)


Vous pouvez également afficher les objets qui ont contribué à l'anomalie en les sélectionnant dans la section des performances de la page de destination.  Le graphique montrera le comportement des objets sélectionnés.

image:Anomaly_Detection_Contributing_Objects.png["cartographier les objets contribuant à l'anomalie"]
