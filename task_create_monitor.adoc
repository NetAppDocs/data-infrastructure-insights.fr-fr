---
sidebar: sidebar 
permalink: task_create_monitor.html 
keywords: monitors, alerts, log, metric, system-defined, system, metric, 
summary: 'Créez des moniteurs de métriques et de journaux personnalisés pour suivre de manière proactive les performances de l"infrastructure, les seuils de capacité et les événements critiques avec des alertes et des notifications automatisées.' 
---
= Alertes avec moniteurs
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Configurez des moniteurs pour suivre les seuils de performances, consigner les événements et les anomalies sur l’ensemble de vos ressources d’infrastructure. Créez des alertes personnalisées pour des mesures telles que la latence d'écriture des nœuds, la capacité de stockage ou les performances des applications, et recevez des notifications lorsque ces conditions sont remplies.

Les moniteurs vous permettent de définir des seuils sur les métriques générées par les objets « d'infrastructure » tels que le stockage, la VM, EC2 et les ports, ainsi que pour les données « d'intégration » telles que celles collectées pour Kubernetes, les métriques avancées ONTAP et les plugins Telegraf.  Ces moniteurs _métriques_ vous alertent lorsque les seuils de niveau d'avertissement ou de niveau critique sont dépassés.

Vous pouvez également créer des moniteurs pour déclencher des alertes de niveau avertissement, critique ou informatif lorsque des _événements de journal_ spécifiés sont détectés.

Data Infrastructure Insights fournit un certain nombre delink:task_system_monitors.html["Moniteurs définis par le système"] également, en fonction de votre environnement.



== Meilleures pratiques de sécurité

Les alertes Data Infrastructure Insights sont conçues pour mettre en évidence les points de données et les tendances de votre locataire, et Data Infrastructure Insights vous permet de saisir n'importe quelle adresse e-mail valide comme destinataire d'alerte.  Si vous travaillez dans un environnement sécurisé, soyez particulièrement attentif à qui reçoit la notification ou a accès à l’alerte.



== Moniteur métrique ou journal ?

. Dans le menu Data Infrastructure Insights , cliquez sur *Alertes > Gérer les moniteurs*
+
La page de liste des moniteurs s'affiche, affichant les moniteurs actuellement configurés.

. Pour modifier un moniteur existant, cliquez sur le nom du moniteur dans la liste.
. Pour ajouter un moniteur, cliquez sur *+ Moniteur*.
+
image:Monitor_log_or_metric.png["Choisissez le moniteur système ou journal"]

+
Lorsque vous ajoutez un nouveau moniteur, vous êtes invité à créer un moniteur de métriques ou un moniteur de journaux.

+
** _Metric_ surveille les alertes sur les déclencheurs liés à l'infrastructure ou aux performances
** _Log_ surveille les alertes sur l'activité liée au journal


+
Après avoir choisi votre type de moniteur, la boîte de dialogue Configuration du moniteur s'affiche.  La configuration varie en fonction du type de moniteur que vous créez.





=== Moniteur métrique

. Dans la liste déroulante, recherchez et choisissez un type d’objet et une métrique à surveiller.


Vous pouvez définir des filtres pour affiner les attributs d'objet ou les mesures à surveiller.

image:MonitorMetricFilter.png["Filtrage des métriques"]

Lorsque vous travaillez avec des données d'intégration (Kubernetes, ONTAP Advanced Data, etc.), le filtrage des métriques supprime les points de données individuels/non appariés de la série de données tracées, contrairement aux données d'infrastructure (stockage, VM, ports, etc.) où les filtres fonctionnent sur la valeur agrégée de la série de données et suppriment potentiellement l'objet entier du graphique.



==== Moniteurs multi-conditions

Vous pouvez choisir d’affiner davantage votre surveillance métrique en ajoutant une deuxième condition. Développez simplement l’invite « + Ajouter une condition de métrique secondaire » et configurez la condition supplémentaire.

image:multi-condition_monitor_second_condition.png["définir la deuxième condition"]

Le moniteur émettra une alerte si les deux conditions sont remplies.

Notez que vous ne pouvez utiliser qu'un « ET » pour une deuxième condition ; vous ne pouvez pas choisir d'alerter sur une condition OU sur l'autre.



==== Définir les conditions du moniteur.

. Après avoir choisi l’objet et la métrique à surveiller, définissez les seuils de niveau d’avertissement et/ou de niveau critique.
. Pour le niveau _Avertissement_, entrez 200 pour notre exemple.  La ligne pointillée indiquant ce niveau d’avertissement s’affiche dans l’exemple de graphique.
. Pour le niveau _Critique_, entrez 400.  La ligne pointillée indiquant ce niveau critique s'affiche dans l'exemple de graphique.
+
Le graphique affiche les données historiques.  Les lignes de niveau d'avertissement et critique sur le graphique sont une représentation visuelle du moniteur, vous pouvez donc facilement voir quand le moniteur peut déclencher une alerte dans chaque cas.

. Pour l'intervalle d'occurrence, choisissez _En continu_ pour une période de _15 minutes_.
+
Vous pouvez choisir de déclencher une alerte dès qu'un seuil est dépassé ou d'attendre que le seuil soit dépassé en continu pendant un certain temps.  Dans notre exemple, nous ne souhaitons pas être alertés à chaque fois que le nombre total d'IOPS dépasse le niveau d'avertissement ou critique, mais uniquement lorsqu'un objet surveillé dépasse en continu l'un de ces niveaux pendant au moins 15 minutes.

+
image:Monitor_metric_conditions.png["Définir les conditions du moniteur"]





==== Définir le comportement de résolution des alertes

Vous pouvez choisir comment une alerte de surveillance métrique est résolue.  Deux choix s'offrent à vous :

* Résoudre le problème lorsque la métrique revient dans la plage acceptable.
* Résoudre lorsque la métrique se situe dans la plage acceptable pendant une durée spécifiée, de 1 minute à 7 jours.




=== Moniteur de journal

Lors de la création d'un *Moniteur de journaux*, choisissez d'abord le journal à surveiller dans la liste des journaux disponibles.  Vous pouvez ensuite filtrer en fonction des attributs disponibles comme ci-dessus.  Vous pouvez également choisir un ou plusieurs attributs « Grouper par ».


NOTE: Le filtre Log Monitor ne peut pas être vide.

image:Monitor_Group_By_Example.png["Choisissez le journal à surveiller, définissez un filtre et sélectionnez le groupe par méthode, si vous le souhaitez"]



==== Définir le comportement de l'alerte

Vous pouvez créer le moniteur pour alerter avec un niveau de gravité _Critique_, _Avertissement_ ou _Informationnel_, lorsque les conditions que vous avez définies ci-dessus se produisent une fois (c'est-à-dire immédiatement), ou attendre d'alerter jusqu'à ce que les conditions se produisent 2 fois ou plus.



==== Définir le comportement de résolution des alertes

Vous pouvez choisir comment une alerte de surveillance de journal est résolue.  Trois choix s'offrent à vous :

* *Résoudre instantanément* : L'alerte est immédiatement résolue sans aucune autre action nécessaire
* *Résolution en fonction du temps* : L'alerte est résolue une fois le temps spécifié écoulé
* *Résolution basée sur l'entrée de journal* : L'alerte est résolue lorsqu'une activité de journal ultérieure s'est produite.  Par exemple, lorsqu'un objet est enregistré comme « disponible ».


image:Monitor_log_monitor_resolution.png["Résolution d'alerte"]



=== Moniteur de détection d'anomalies

. Dans la liste déroulante, recherchez et choisissez un type d’objet et une métrique à surveiller.


Vous pouvez définir des filtres pour affiner les attributs d'objet ou les mesures à surveiller.

image:AnomalyDetectionMonitorMetricChoosing.png["Filtrage des métriques pour la détection des anomalies"]



==== Définir les conditions du moniteur.

. Après avoir choisi l'objet et la métrique à surveiller, vous définissez les conditions dans lesquelles une anomalie est détectée.
+
** Choisissez de détecter une anomalie lorsque la métrique choisie *monte au-dessus* des limites prédites, *descend en dessous* de ces limites, ou *monte au-dessus ou descend en dessous* des limites.
** Définissez la *sensibilité* de détection.  *Faible* (moins d'anomalies sont détectées), *Moyen* ou *Élevé* (plus d'anomalies sont détectées).
** Définissez les alertes sur *Avertissement* ou *Critique*.
** Si vous le souhaitez, vous pouvez choisir de réduire le bruit, en ignorant les anomalies lorsque la métrique choisie est inférieure à un seuil que vous avez défini.




image:AnomalyDetectionMonitorDefineConditions.png["Définir les conditions pour déclencher une détection d'anomalie"]



=== Sélectionnez le type de notification et les destinataires

Dans la section _Configurer les notifications d'équipe_, vous pouvez choisir d'alerter votre équipe par e-mail ou par Webhook.

image:Webhook_Choose_Monitor_Notification.png["Choisissez la méthode d'alerte"]

*Alerte par e-mail :*

Spécifiez les destinataires de courrier électronique pour les notifications d'alerte.  Si vous le souhaitez, vous pouvez choisir différents destinataires pour les avertissements ou les alertes critiques.

image:email_monitor_alerts.png["Destinataires des alertes par e-mail"]

*Alerte via Webhook :*

Spécifiez le(s) webhook(s) pour les notifications d'alerte.  Si vous le souhaitez, vous pouvez choisir différents webhooks pour les alertes d'avertissement ou critiques.

image:Webhook_Monitor_Notifications.png["Alerte Webhook"]


NOTE: Les notifications du collecteur de données ONTAP ont priorité sur toutes les notifications de surveillance spécifiques pertinentes pour le cluster/collecteur de données.  La liste de destinataires que vous avez définie pour le collecteur de données lui-même recevra les alertes du collecteur de données.  S'il n'y a pas d'alertes de collecteur de données actives, les alertes générées par le moniteur seront envoyées à des destinataires de moniteur spécifiques.



=== Définition d'actions correctives ou d'informations supplémentaires

Vous pouvez ajouter une description facultative ainsi que des informations supplémentaires et/ou des actions correctives en remplissant la section *Ajouter une description d'alerte*.  La description peut contenir jusqu'à 1024 caractères et sera envoyée avec l'alerte.  Le champ Informations/Actions correctives peut contenir jusqu'à 67 000 caractères et sera affiché dans la section récapitulative de la page de destination de l'alerte.

Dans ces champs, vous pouvez fournir des notes, des liens ou des étapes à suivre pour corriger ou traiter l'alerte.

Vous pouvez ajouter n’importe quel attribut d’objet (par exemple, le nom de stockage) comme paramètre à une description d’alerte.  Par exemple, vous pouvez définir des paramètres pour le nom du volume et le nom du stockage dans une description telle que : « Latence élevée pour le volume : _%%relatedObject.volume.name%%_, Stockage : _%%relatedObject.storage.name%%_ ».

image:Monitors_Alert_Description.png["Actions correctives d'alerte et description"]



=== Sauvegardez votre moniteur

. Si vous le souhaitez, vous pouvez ajouter une description du moniteur.
. Donnez au moniteur un nom significatif et cliquez sur *Enregistrer*.
+
Votre nouveau moniteur est ajouté à la liste des moniteurs actifs.





== Liste des moniteurs

La page Moniteur répertorie les moniteurs actuellement configurés, affichant les éléments suivants :

* Nom du moniteur
* Statut
* Objet/métrique surveillé
* Conditions du moniteur


Vous pouvez choisir de suspendre temporairement la surveillance d'un type d'objet en cliquant sur le menu à droite du moniteur et en sélectionnant *Pause*.  Lorsque vous êtes prêt à reprendre la surveillance, cliquez sur *Reprendre*.

Vous pouvez copier un moniteur en sélectionnant *Dupliquer* dans le menu.  Vous pouvez ensuite modifier le nouveau moniteur et changer l'objet/la métrique, le filtre, les conditions, les destinataires des e-mails, etc.

Si un moniteur n'est plus nécessaire, vous pouvez le supprimer en sélectionnant *Supprimer* dans le menu.



== Groupes de surveillance

Le regroupement vous permet d'afficher et de gérer les moniteurs associés.  Par exemple, vous pouvez disposer d'un groupe de surveillance dédié au stockage sur votre locataire ou de surveillances pertinentes pour une certaine liste de destinataires.

image:Monitors_GroupList.png["Regroupement des moniteurs"]

Les groupes de moniteurs suivants sont affichés.  Le nombre de moniteurs contenus dans un groupe est indiqué à côté du nom du groupe.

* *Tous les moniteurs* répertorie tous les moniteurs.
* *Moniteurs personnalisés* répertorie tous les moniteurs créés par l'utilisateur.
* *Moniteurs suspendus* répertorie tous les moniteurs système qui ont été suspendus par Data Infrastructure Insights.
* Data Infrastructure Insights affichera également un certain nombre de *Groupes de surveillance système*, qui répertorieront un ou plusieurs groupes delink:task_system_monitors.html["moniteurs définis par le système"] , y compris les moniteurs d'infrastructure et de charge de travail ONTAP .



NOTE: Les moniteurs personnalisés peuvent être suspendus, repris, supprimés ou déplacés vers un autre groupe.  Les moniteurs définis par le système peuvent être suspendus et repris, mais ne peuvent pas être supprimés ou déplacés.



=== Moniteurs suspendus

Ce groupe ne sera affiché que si Data Infrastructure Insights a suspendu un ou plusieurs moniteurs.  Un moniteur peut être suspendu s'il génère des alertes excessives ou continues.  Si le moniteur est un moniteur personnalisé, modifiez les conditions pour empêcher l'alerte continue, puis reprenez le moniteur.  Le moniteur sera supprimé du groupe Moniteurs suspendus lorsque le problème à l’origine de la suspension sera résolu.



=== Moniteurs définis par le système

Ces groupes afficheront les moniteurs fournis par Data Infrastructure Insights, à condition que votre environnement contienne les périphériques et/ou la disponibilité des journaux requis par les moniteurs.

Les moniteurs définis par le système ne peuvent pas être modifiés, déplacés vers un autre groupe ou supprimés.  Cependant, vous pouvez dupliquer un moniteur système et modifier ou déplacer le doublon.

Les moniteurs système peuvent inclure des moniteurs pour l'infrastructure ONTAP (stockage, volume, etc.) ou les charges de travail (c'est-à-dire les moniteurs de journaux) ou d'autres groupes.  NetApp évalue en permanence les besoins des clients et les fonctionnalités des produits, et mettra à jour ou ajoutera des moniteurs et des groupes système selon les besoins.



=== Groupes de moniteurs personnalisés

Vous pouvez créer vos propres groupes pour contenir des moniteurs en fonction de vos besoins.  Par exemple, vous souhaiterez peut-être un groupe pour tous vos moniteurs liés au stockage.

Pour créer un nouveau groupe de moniteurs personnalisé, cliquez sur le bouton *"+" Créer un nouveau groupe de moniteurs*.  Saisissez un nom pour le groupe et cliquez sur *Créer un groupe*.  Un groupe vide est créé avec ce nom.

Pour ajouter des moniteurs au groupe, accédez au groupe _Tous les moniteurs_ (recommandé) et effectuez l'une des opérations suivantes :

* Pour ajouter un seul moniteur, cliquez sur le menu à droite du moniteur et sélectionnez _Ajouter au groupe_.  Choisissez le groupe auquel ajouter le moniteur.
* Cliquez sur le nom du moniteur pour ouvrir la vue d'édition du moniteur et sélectionnez un groupe dans la section _Associer à un groupe de moniteurs_.
+
image:Monitors_AssociateToGroup.png["Associer au groupe"]



Supprimez les moniteurs en cliquant sur un groupe et en sélectionnant _Supprimer du groupe_ dans le menu.  Vous ne pouvez pas supprimer des moniteurs du groupe _Tous les moniteurs_ ou _Moniteurs personnalisés_.  Pour supprimer un moniteur de ces groupes, vous devez supprimer le moniteur lui-même.


NOTE: La suppression d’un moniteur d’un groupe ne supprime pas le moniteur de Data Infrastructure Insights.  Pour supprimer complètement un moniteur, sélectionnez le moniteur et cliquez sur _Supprimer_.  Cela le supprime également du groupe auquel il appartenait et il n'est plus disponible pour aucun utilisateur.

Vous pouvez également déplacer un moniteur vers un groupe différent de la même manière, en sélectionnant _Déplacer vers le groupe_.

Pour mettre en pause ou reprendre tous les moniteurs d'un groupe à la fois, sélectionnez le menu du groupe et cliquez sur _Pause_ ou _Reprendre_.

Utilisez le même menu pour renommer ou supprimer un groupe.  La suppression d'un groupe ne supprime pas les moniteurs de Data Infrastructure Insights; ils sont toujours disponibles dans _Tous les moniteurs_.

image:Monitors_PauseGroup.png["Mettre un groupe en pause"]



== Moniteurs définis par le système

Data Infrastructure Insights comprend un certain nombre de moniteurs définis par le système pour les métriques et les journaux.  Les moniteurs système disponibles dépendent des collecteurs de données présents sur votre locataire.  De ce fait, les moniteurs disponibles dans Data Infrastructure Insights peuvent changer à mesure que des collecteurs de données sont ajoutés ou que leurs configurations sont modifiées.

Voir lelink:task_system_monitors.html["Moniteurs définis par le système"] page pour les descriptions des moniteurs inclus avec Data Infrastructure Insights.



=== Plus d'informations

* link:task_view_and_manage_alerts.html["Affichage et suppression des alertes"]

