---
sidebar: sidebar 
permalink: task_webhook_example_pagerduty.html 
keywords: webhook, notification, PagerDuty, integration 
summary: 'Créer un webhook pour alerter sur les seuils de performance ou d"inventaire pour Pagerduty' 
---
= Exemple de webhook pour PagerDuty
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Les webhooks permettent aux utilisateurs d'envoyer des notifications d'alerte à diverses applications à l'aide d'un canal webhook personnalisé.  Cette page fournit un exemple de configuration de webhooks pour PagerDuty.


NOTE: Cette page fait référence à des instructions de tiers, qui peuvent être sujettes à modification.  Reportez-vous à lalink:https://support.pagerduty.com/docs/services-and-integrations["Documentation de PagerDuty"] pour les informations les plus récentes.



== Configuration de PagerDuty :

. Dans PagerDuty, accédez à *Services > Répertoire des services* et cliquez sur le bouton *+Nouveau service*
. Saisissez un _Nom_ et sélectionnez _Utiliser directement notre API_.  Cliquez sur _Ajouter un service_.
+
image:Webhooks_PagerDutyScreen1.png["Écran Pagerduty"]

. Cliquez sur l'onglet _Intégrations_ pour voir la *Clé d'intégration*.  Vous aurez besoin de cette clé lorsque vous créerez le webhook Data Infrastructure Insights ci-dessous.


. Accédez à *Incidents* ou *Services* pour afficher les alertes.
+
image:Webhooks_PagerDutyScreen2.png["Écran Pagerduty"]





== Créer un webhook Data Infrastructure Insights :

. Dans Data Infrastructure Insights, accédez à *Admin > Notifications* et sélectionnez l'onglet *Webhooks*.  Cliquez sur *+Webhook* pour créer un nouveau webhook.
. Donnez au webhook un nom significatif, tel que « Déclencheur PagerDuty ».  Vous utiliserez ce webhook pour les événements de niveau critique et d’avertissement.
. Dans la liste déroulante _Type de modèle_, sélectionnez *PagerDuty*.


. Créez un secret de paramètre personnalisé nommé _routingKey_ et définissez la valeur sur la valeur PagerDuty _Integration Key_ ci-dessus.
+
image:Webhooks_Custom_Secret_Routing_Key.png["Définition de la clé de routage"]



Répétez ces étapes pour créer un webhook « PagerDuty Resolve » pour les événements résolus.



== PagerDuty vers les Data Infrastructure Insights, cartographie des champs

Le tableau et l'image suivants montrent le mappage des champs entre PagerDuty et Data Infrastructure Insights:

[cols="<,<"]
|===
| PagerDuty | Data Infrastructure Insights 


| Touche d'alerte | ID d'alerte 


| Source | Déclenché sur 


| Composant | Nom métrique 


| Groupe | Type d'objet 


| Classe | Nom du moniteur 
|===
image:Webhooks-PagerDuty_Fields.png["Champs PagerDuty dans CI"]



== Notifications via Webhook

Pour notifier des événements via un webhook, dans Data Infrastructure Insights, accédez à *Alertes > Moniteurs* et cliquez sur *+Moniteur* pour créer un nouveaulink:task_create_monitor.html["moniteur"] .

* Sélectionnez une métrique et définissez les conditions du moniteur.
* Sous _Configurer les notifications d'équipe_, choisissez la méthode de livraison *Webhook*.
* Choisissez le webhook « PagerDuty Trigger » pour les événements de niveau critique et d'avertissement.
* Choisissez « PagerDuty Resolve » pour les événements résolus.
+
image:Webhooks_Notifications.png["Notifications Webhook"]




NOTE: La définition de notifications distinctes pour les événements déclencheurs et les événements résolus est une bonne pratique, car PagerDuty gère les événements déclencheurs différemment des événements résolus.
